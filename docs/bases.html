<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>AmericasBarometer datasets</title>

<script src="site_libs/header-attrs-2.18/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">LAPOP_edu</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Preparation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="install.html">Installing R and RStudio</a>
    </li>
    <li>
      <a href="basic.html">Basic procedures</a>
    </li>
    <li>
      <a href="bases.html">Importing datasets</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    First steps
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Manipulation.html">Data manipulation</a>
    </li>
    <li>
      <a href="Expansion.html">Survey weights</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Describing and plotting data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Descriptives.html">Descriptive statistics: nominal variables</a>
    </li>
    <li>
      <a href="Descriptives2.html">Descriptive statistics: ordinal variables</a>
    </li>
    <li>
      <a href="Descriptives3.html">Descriptive statistics: numerical variables</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Basic inference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="IC.html">Confidence intervals</a>
    </li>
    <li>
      <a href="ttest.html">Compararing 2 means</a>
    </li>
    <li>
      <a href="anova.html">Comparing more than 2 means</a>
    </li>
    <li>
      <a href="chi.html">Cross-tables and chi-square analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Modeling
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="correlation.html">Correlation</a>
    </li>
    <li>
      <a href="regresion1.html">Simple linear regresion</a>
    </li>
    <li>
      <a href="regresion2.html">Multivariate linear regresion</a>
    </li>
    <li>
      <a href="logit.html">Logistic regresion</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Extras
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="maps.html">Maps</a>
    </li>
  </ul>
</li>
<li>
  <a href="Links.html">Contact</a>
</li>
<li>
  <a href="https://arturomaldonado.github.io/BarometroEdu_Web/index.html">Spanish</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">AmericasBarometer datasets</h1>

</div>


<style type="text/css">
.columns {display: flex;}
h1 {color: #3366CC;}
</style>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>Data that we are going to use through this sections are the
AmericasBarometer datasets from the <a
href="https://www.vanderbilt.edu/lapop/">LAPOP Lab</a>. A center for
excellence in international survey research, LAPOP team uses
gold-standard scientific approaches and innovative methods in
cross-national and targeted surveys, evaluations, and reports about
individuals´ attitudes, evaluations and experiences. The
AmericasBarometer is the only scientifically rigorous comparative survey
of democratic values and behaviors that covers all independent countries
in North, Central, and South America, as well as a significant number of
countries in the Caribbean. Every year, it publishes dozens of
high-quality academic research and relevant articles for public policy
implementation. Reports from this project can be seen and downloaded in
this <a
href="https://www.vanderbilt.edu/lapop/publications.php">link</a>.</p>
<p>The 2021 wave of the AmericasBarometer is the nineth wave of this
project. The questionnaiere includes a common module that allows to
evaluate to what extent citizens support democratic values, perceive if
there are basic liberties, how they experience the rule of law, who they
participate in political life, whether they support their political
system, if they use social networks, among other topics. The common
questionnaires and the country-specific questionnaires are available in
this <a
href="https://www.vanderbilt.edu/lapop/core-surveys.php">link</a>.</p>
<p>Datasets and reports are public and are available in the project´s
webpage.</p>
<p>This data should be cited as follows: Source: AmericasBarometer by
the Latin American Public Opinion Project (LAPOP),
wwww.LapopSurveys.org.</p>
</div>
<div id="downloading-americasbarometer-datasets" class="section level1">
<h1>Downloading AmericasBarometer datasets</h1>
<p>Datasets are for free download <a
href="http://datasets.americasbarometer.org/database/login.php">here</a>.
In this link, you can register or get into as a “Free user”. In the
Search space, you can text “2018”. here you have access to a complete
dataset “2004-2018 LAPOP AmericasBarometer Merge (v1.0FREE).dta”
(434.6MB) in STATA format.</p>
<p><img src="datos.png" width="372" /></p>
<p>We can also access datasets for each country. For example, if we look
for “Mexico” in the Search space, we can access datasets for each round
of the AmericasBarometer for Mexico. Data for the last round can be
downloaded as a file called
“MEX_2021_LAPOP_AmericasBarometer_v1.2_w.dta” in STATA format. Also, we
can download the questionnaire and a technical document.</p>
<p><img src="mexico.png" width="376" /></p>
</div>
<div id="importing-americasbarometer-datasets" class="section level1">
<h1>Importing AmericasBarometer datasets</h1>
<p>Once downloaded a dataset, it is a good practice to create a new
project in RStudio. In the “File” menu, there an option “New project”,
where we can select the option “New directory” and “New project” and
then we can name the project and give a path in your computer.</p>
<p><img src="project.png" width="380" /></p>
<p>This path is the working directory where produced files will be
saved. If you are not clear what is the path, you can always see the
working directory in the RStudio´s console or you can recall it using
the commando <code>getwd()</code>. If you want to change the working
directory, you can use the command <code>setwd()</code>. For example,
you can define:</p>
<p><code>setwd("path_of_working_directory/working_directory")</code></p>
<p>The downloaded AmericasBarometer dataset has to be saved in the
working directory. In this way, we can read a STATA dataset as a
dataframe object in R. There are many ways to read a dataset in R. A
first way is via the menu “File” and the sub menu “Import Dataset”. In
this option, we can import files in text, Excel, SPSS, SAS or STATA
format. If we choose STATA, R opens a window where we should look for
path of the file. This window shows a previsualization of the dataset.
The dataset shows the original name by defect, but we can change the
name to a simpler one. On this example, we have changed the name
“LAPOP_Merge_2004_2018.dta” to just “lapop”. The Environment will show
this name.</p>
<p><img src="import.png" width="700" /></p>
<p>This way to import a dataset can be done also by code, what is
advisable when we have a R Script or a RMarkdown file. Actually, the
menu “Import Dataset” shows the code that we can run to reproduce this
process.</p>
<p>Here it is necessary to point out that R and RStudio work with
“packages”, that contain commands and algorithms for doing procedures.
Some of these packages come loaded since installation. We have to
install others from the R repository (CRAN). In the following sections,
we are going to work with some packages that are not loaded and that we
have to install. We are going to use the code
<code>install.packages("package")</code>.</p>
<p>Once installed, we have to call a package to be “active”. Active
packages have a check in the modulo “Packages”. To call a package we use
the command <code>library(package)</code>.</p>
<p>In this case, to import a dataset in STATA we call the library
<code>haven</code> and use the command <code>read_stata</code>. The
details of this library can be found <a
href="https://cran.r-project.org/web/packages/haven/index.html">here</a>.
In this library, we also have the command <code>read_dta</code> to read
STATA files or the command <code>read_sav</code> to read SPSS files. In
this example, if the file for Mexico in STATA format is in the working
directory, the code to load this file as a dataframe in R is</p>
<p><code>library(haven)</code></p>
<p>We call this dataframe “mex18”.</p>
<p><code>mex18 = read_stata("Mexico LAPOP AmericasBarometer 2019 v1.0_W.dta")</code>.</p>
<p>We have to take into account that we have to activate the library
with the command <code>library</code>, before usign the command included
in this library. If we do not activate the library, the code gets an
error.</p>
<p>In the menu “Import Dataset” we can also load files from Excel using
the library <code>readxl</code> and the command <code>read_excel</code>.
Finally, we can also load files .txt using the library
<code>readr</code>.</p>
<p>In the section about <a
href="https://arturomaldonado.github.io/BarometroEdu_Web_Eng/correlation.html">correlation</a>,
we work with data from the project Variaties of Democracy (or V-Dem).
This data can be downloaded in the project´s web in .csv of .xls
formats. If we download this data and save in the working directory with
the name “v.dem.xlsx”, this data can de read as a new dataframe. Firstm
we have to activate the library.</p>
<p><code>library(readxl)</code></p>
<p>Then, we read the file</p>
<p><code>vdem = read_excel("vdem.xlsx")</code>.</p>
<p>A general option to load datasets in RStudio is installing and using
a library called <code>rio</code>. This library allows to import,
export, convert different types of data files, such as STATA, SPSS,
Excel, csv, SAS, RData, Minitab, dbf, among many more. For this website,
this library is useful because it allows to import dataset saved in
virtual repositories like GitHub.</p>
</div>
<div id="reading-americasbarometer-data-in-rstudio"
class="section level1">
<h1>Reading AmericasBarometer data in RStudio</h1>
<p>Along these sections, we will use limited datasets of the 2018/19
wave for space issues. We will also use datasets in RData format, a
native type of dataset in R, which is efficient in saving space. This
allows to load the 2018/10 dataset with all variables.</p>
<p>These datasets are stored in a repository called “materials_ede” in
the LAPOP account in <a
href="https://github.com/lapop-central/materials_edu">GitHub</a>. From
this point, we are going to use code that anyone can replicate.</p>
<p>For example, to load a limited version of the dataset of the 2018/19
wave, stored in GitHub in SPSS format, we can activate library
<code>rio</code> and import this remote dataset with the command
<code>import</code>.</p>
<pre class="r"><code>#install.packages(&quot;rio&quot;) You should use this code if rio is not installed yet
library(rio) 
lapop18 = import(&quot;https://raw.github.com/lapop-central/materials_edu/main/LAPOP_AB_Merge_2018_v1.0.sav&quot;)</code></pre>
<p>Once this code run, we see a dataset appears in the Environment. This
dataset includes 31,050 observations and 84 variables.</p>
<p>In the same manner, we can use the library <code>rio</code> to call a
complete dataset, in RData format, with the same commando. This new
dataset is saved in a dataframe called “lapop18v2”.</p>
<pre class="r"><code>lapop18v2 = import(&quot;https://raw.github.com/lapop-central/materials_edu/main/lapop18.RData&quot;)</code></pre>
<p>This new dataset has 28,042 observations (because it does not include
USA and Canada) and 1,369 variables.</p>
</div>
<div id="summary" class="section level1">
<h1>Summary</h1>
<p>In this section, we have briefly explained how to download
AmericasBarometer datasets, either a complete wave dataset or a dataset
of a particular country. Then, we have explained how to define a project
in RStudio and how to define a working directory. It is in the working
directory where downloaded datasets shoul be saved to be able to import
then in RStudio. We can import datasets using the library
<code>haven</code> or the library <code>rio</code>. With these
libraries, we can import multiple formats, including STATA, SPSS, csv,
formats in which we can download AmericasBarometer datasets.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
